// JSON Hook - 监控JSON序列化/反序列化
(function() {
    const originalParse = JSON.parse;
    const originalStringify = JSON.stringify;

    JSON.parse = function(text, reviver) {
        console.log('[JSON.parse]', typeof text === 'string' ? text.substring(0, 500) : text);
        let result = originalParse.apply(this, arguments);
        // 可在此处检查特定字段
        // if (result && result.token) { console.log('[Token Found]', result.token); }
        return result;
    };

    JSON.stringify = function(value, replacer, space) {
        let result = originalStringify.apply(this, arguments);
        console.log('[JSON.stringify]', result?.substring(0, 500));
        return result;
    };

    console.log('[Hook] JSON Hook 已注入');
})();
